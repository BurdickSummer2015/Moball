 
#!/bin/bash
# init
function pause(){
   read -p "$*"
}

function valid_ip()
{
    local  ip=$1
    local  stat=1

    if [[ $ip =~ ^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$ ]]; then
        OIFS=$IFS
        IFS='.'
        ip=($ip)
        IFS=$OIFS
        [[ ${ip[0]} -le 255 && ${ip[1]} -le 255 \
            && ${ip[2]} -le 255 && ${ip[3]} -le 255 ]]
        stat=$?
    fi
    return $stat
}

echo "You will need a valid Static IP address inside your network to dedicate to to the Phyflex i.MX6. You should contact your network adminstrator to get one. If you have already gotten one, then you can enter it now. Or you can enter [d] to "
read BoardStaticIP


if (valid_ip $BoardStaticIP); then
  echo "$BoardStaticIP"
elif($BoardStaticIP=="d");then
	#get your ip address
	ip=$(/sbin/ip -o -4 addr list eth0 | awk '{print $4}' | cut -d/ -f1)
	sudo nmap -v -sn -n $ip/24 -oG - | awk '/Status: Down/{print $2}'
else
  echo "Invalid IP"
fi

: <<'COMMENT'
#get your ip address
ip=$(/sbin/ip -o -4 addr list eth0 | awk '{print $4}' | cut -d/ -f1)
sudo nmap -v -sn -n $ip/24 -oG - | awk '/Status: Down/{print $2}'
  
COUNTER=0
while [  $COUNTER -lt 10 ]; do
     	echo The counter is $COUNTER
	pause 'Press [Enter] key to continue...'
	sudo arp-scan -I wlan0 192.168.1.0/24
     	let COUNTER=COUNTER+1 
done
COMMENT
# ...
# call it

# rest of the script
# ...
 
